# 워크플로우 단계 상세 가이드

## Phase 1: 요청 수집 (Request Collection)

### 목적
고객이 제공한 다양한 형식의 요청 파일을 분석하여 구조화된 요청 목록 생성

### 지원 파일 형식
- **PPT/PPTX**: 슬라이드별 분석, 스크린샷 인식
- **이미지 (PNG/JPG)**: UI 변경 요청 인식, 마킹/하이라이트 해석
- **PDF**: 텍스트 추출 및 분석
- **텍스트/문서**: 요구사항 구조화

### 분석 출력 형식

```json
{
  "source_file": "고객요청_20250130.pptx",
  "analyzed_at": "2025-01-30T10:00:00Z",
  "requests": [
    {
      "id": "REQ-001",
      "title": "메인 페이지 배너 이미지 교체",
      "description": "메인 페이지 상단 슬라이드의 3번째 이미지를 새 이미지로 교체",
      "category": "content",
      "priority": "high",
      "affected_pages": ["/"],
      "attachments": ["new-banner.jpg"],
      "source_slide": 2
    }
  ],
  "summary": {
    "total_requests": 5,
    "by_category": {
      "content": 3,
      "frontend": 1,
      "backend": 1
    }
  }
}
```

### 자동 분류 규칙

| 키워드 | 카테고리 |
|--------|---------|
| 이미지 교체, 텍스트 수정, PDF 업데이트 | content |
| 레이아웃, 디자인, 색상, 버튼 | frontend |
| 폼 제출, 데이터, API | backend |

---

## Phase 2: 티켓 생성 (Ticket Creation)

### 목적
분석된 요청을 Notion 티켓으로 변환하고 고객 관점에서 검증

### Notion 티켓 스키마

```json
{
  "제목": "string",
  "상태": "대기 | 진행중 | 완료 | 보류",
  "난이도": "쉬움 | 보통 | 어려움",
  "타입": "프론트엔드 | 백엔드 | 콘텐츠 | 복합",
  "배포가능": "즉시 | 예정 | 검토필요",
  "우선순위": "높음 | 중간 | 낮음",
  "요청일": "date",
  "완료일": "date",
  "요청내용": "rich_text",
  "영향범위": "multi_select",
  "첨부파일": "files"
}
```

### 고객 관점 검토 (customer-reviewer)

검토 항목:
1. **의도 반영**: 원본 요청이 티켓에 정확히 반영되었는가
2. **누락 확인**: 빠진 요청 사항이 없는가
3. **오해 식별**: 잘못 해석된 부분이 없는가
4. **우선순위**: 고객이 원하는 우선순위와 일치하는가

출력 형식:
```markdown
## 고객 관점 검토 결과

### ✅ 적절히 반영된 사항
- [항목들]

### ⚠️ 확인 필요 사항
- [확인 필요 항목들]

### ❌ 누락/오해 가능성
- [문제 항목들]

### 💡 제안
- [개선 제안]
```

---

## Phase 3: 분류/검토 (Classification & Review)

### 목적
기술적 관점에서 티켓을 분류하고 실현 가능성 평가

### 난이도 분류 기준

| 난이도 | 기준 | 예시 |
|--------|------|------|
| 쉬움 (easy) | 단순 콘텐츠 교체, 1개 파일 수정 | 이미지 교체, 텍스트 수정 |
| 보통 (medium) | 여러 파일 수정, 스타일 변경 | 레이아웃 수정, 새 섹션 추가 |
| 어려움 (hard) | 로직 변경, 새 기능 추가 | 폼 기능 추가, API 연동 |

### 배포 가능성 분류

| 분류 | 조건 | 조치 |
|------|------|------|
| immediate | 단순 변경, 리스크 낮음 | 바로 배포 가능 |
| scheduled | 중요 변경, 테스트 필요 | 예정된 배포 일정에 포함 |
| requires_review | 리스크 있음, 추가 검토 필요 | 상위 승인 필요 |

### 개발팀 관점 검토 (dev-team-reviewer)

검토 항목:
1. **기술적 실현 가능성**: 현재 기술 스택으로 구현 가능한가
2. **난이도 정확성**: 분류된 난이도가 적절한가
3. **의존성 확인**: 다른 티켓/시스템과의 의존성
4. **리스크 식별**: 잠재적 문제점

출력 형식:
```markdown
## 개발팀 검토 결과

### 기술 분석
- 기술 스택 호환성: [확인 결과]
- 예상 작업 범위: [파일/컴포넌트 목록]

### 난이도 검증
- 현재 분류: [분류]
- 검증 결과: [적절/상향/하향 조정 필요]

### 의존성
- [의존 항목들]

### 리스크
- [리스크 항목들]

### 권장사항
- [권장 사항들]
```

---

## Phase 4: 로컬 개발 (Local Development)

### 목적
티켓 요구사항에 따른 코드 수정 및 로컬 검증

### 개발 프로세스

1. **작업 브랜치 생성**
   ```bash
   git checkout -b feature/TICKET-001-description
   ```

2. **코드 수정**
   - 요구사항에 따른 파일 수정
   - 기존 패턴/스타일 준수

3. **로컬 테스트 (필수)**
   ```bash
   # .workflow/config.json의 dev.port 설정 참조
   PORT=7987 npm start
   ```

   **중요**: 반드시 로컬 서버를 띄우고 사용자에게 확인 URL을 제공해야 합니다.
   - 확인 URL 형식: `http://localhost:{port}/{path}`
   - 사용자가 브라우저에서 직접 확인 후 승인해야 다음 단계 진행

4. **빌드 검증**
   ```bash
   npm run build
   # 빌드 오류 없음 확인
   ```

### 변경사항 설명 (changelog-writer)

비개발자도 이해할 수 있는 변경사항 설명 생성:

```markdown
## 변경사항 요약

### 🔄 변경된 내용
- **메인 페이지**: 상단 배너 이미지가 새 이미지로 교체되었습니다
- **입학 안내 페이지**: 2025학년도 모집요강 PDF가 업데이트되었습니다

### 📍 확인 포인트
1. 메인 페이지(/) 접속 → 상단 슬라이드 3번째 이미지 확인
2. 입학 안내(/admission) → "모집요강 다운로드" 버튼 클릭 → PDF 확인

### 💻 기술 변경 (참고용)
- `public/resources/img/banner-03.jpg` 교체
- `public/resources/pdf/2025-admission-guide.pdf` 교체
```

---

## Phase 5: 배포/통보 (Deploy & Notify)

### 목적
프로덕션 배포 준비 및 고객 통보

### 배포 프로세스

배포 방식은 `.workflow/config.json`의 `deploy.method` 설정에 따라 결정됩니다.

#### GitHub 연동 배포 (method: "github")

1. **변경사항 커밋**
   ```bash
   git add .
   git commit -m "feat: [작업 요약]"
   ```

2. **main 브랜치로 푸시**
   ```bash
   git push origin main
   ```
   - GitHub Actions 또는 연동된 호스팅 서비스에서 자동 빌드/배포

3. **배포 확인**
   - 프로덕션 URL에서 변경사항 확인

#### FTP 배포 (method: "ftp")

1. **프로덕션 빌드**
   ```bash
   npm run build
   ```

2. **빌드 결과 확인**
   - `build/` 폴더 생성 확인
   - 주요 파일 존재 확인

3. **FTP 업로드**
   - FTP 클라이언트로 서버 접속
   - 기존 파일 백업 (선택)
   - build/ 폴더 내용을 서버 루트에 업로드
   - 브라우저에서 실제 URL 접속하여 확인

### 고객 통보 메일 (taejae-deploy-notify)

```markdown
제목: [태재대학교 입학처] 웹사이트 업데이트 완료 안내

안녕하세요, 태재대학교 입학처 담당자님.

요청하신 웹사이트 수정 작업이 완료되어 안내드립니다.

## 완료된 작업
- [작업 목록]

## 확인 방법
- [확인 URL 및 방법]

## 문의
추가 수정이 필요하시거나 문의사항이 있으시면 연락 주세요.

감사합니다.
```
